(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4440],{7148:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-notify",function(){return t(76394)}])},22067:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var i=t(85893),a=t(67294),r=t(59633),s=t(28700),l=t(17586),o=t(70869),c=t(4481);let u=e=>{let{apiPath:n,checked:t,reversed:u=!1,configPath:d="",disabled:f=!1,fieldName:h,label:p,tip:m,useSubmit:x,onChange:g}=e,[b,v]=(0,a.useState)(null),y=null,{setFieldInConfigState:j}=(0,a.useContext)(c.a)||{},w=()=>{v(null),clearTimeout(y),y=null},C=async e=>{if(x){v((0,s.kg)(s.Jk));let t=u?!e:e;await (0,o.Si)({apiPath:n,data:{value:t},onSuccess:()=>{j({fieldName:h,value:t,path:d}),v((0,s.kg)(s.zv))},onError:e=>{v((0,s.kg)(s.Un,"There was an error: ".concat(e)))}}),y=setTimeout(w,o.sI)}g&&g(e)},k=null!==b&&b.type===s.Jk;return(0,i.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[p&&(0,i.jsx)("div",{className:"label-side",children:(0,i.jsx)("span",{className:"formfield-label",children:p})}),(0,i.jsxs)("div",{className:"input-side",children:[(0,i.jsxs)("div",{className:"input-group",children:[(0,i.jsx)(r.Z,{className:"switch field-".concat(h),loading:k,onChange:C,defaultChecked:t,checked:t,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:f}),(0,i.jsx)(l.E,{status:b})]}),(0,i.jsx)("p",{className:"field-tip",children:m})]})]})};u.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},78021:function(e,n,t){"use strict";var i=t(78235);n.Z=i.Z},65765:function(e,n,t){"use strict";var i=t(61185),a=t(59408),r=i.ZP;r.Header=i.h4,r.Footer=i.$_,r.Content=i.VY,r.Sider=a.Z,r._InternalSiderContext=a.D,n.default=r},10227:function(e,n,t){"use strict";var i=t(79338);n.Z=i.Z},59633:function(e,n,t){"use strict";t.d(n,{Z:function(){return y}});var i=t(87462),a=t(4942),r=t(72034),s=t(93967),l=t.n(s),o=t(97685),c=t(45987),u=t(67294),d=t(22720),f=t(77524),h=u.forwardRef(function(e,n){var t,i=e.prefixCls,r=void 0===i?"rc-switch":i,s=e.className,h=e.checked,p=e.defaultChecked,m=e.disabled,x=e.loadingIcon,g=e.checkedChildren,b=e.unCheckedChildren,v=e.onClick,y=e.onChange,j=e.onKeyDown,w=(0,c.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),C=(0,d.Z)(!1,{value:h,defaultValue:p}),k=(0,o.Z)(C,2),N=k[0],Z=k[1];function E(e,n){var t=N;return m||(Z(t=e),null==y||y(t,n)),t}var S=l()(r,s,(t={},(0,a.Z)(t,"".concat(r,"-checked"),N),(0,a.Z)(t,"".concat(r,"-disabled"),m),t));return u.createElement("button",Object.assign({},w,{type:"button",role:"switch","aria-checked":N,disabled:m,className:S,ref:n,onKeyDown:function(e){e.which===f.Z.LEFT?E(!1,e):e.which===f.Z.RIGHT&&E(!0,e),null==j||j(e)},onClick:function(e){var n=E(!N,e);null==v||v(n,e)}}),x,u.createElement("span",{className:"".concat(r,"-inner")},N?g:b))});h.displayName="Switch";var p=t(17399),m=t(92933),x=t(23173),g=t(51964),b=function(e,n){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>n.indexOf(i)&&(t[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)0>n.indexOf(i[a])&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(t[i[a]]=e[i[a]]);return t},v=u.forwardRef(function(e,n){var t=e.prefixCls,s=e.size,o=e.disabled,c=e.loading,d=e.className,f=b(e,["prefixCls","size","disabled","loading","className"]),v=u.useContext(p.E_),y=v.getPrefixCls,j=v.direction,w=u.useContext(x.Z),C=u.useContext(m.Z),k=(null!=o?o:C)||c,N=y("switch",t),Z=u.createElement("div",{className:"".concat(N,"-handle")},c&&u.createElement(r.Z,{className:"".concat(N,"-loading-icon")})),E=l()((0,a.Z)((0,a.Z)((0,a.Z)({},"".concat(N,"-small"),"small"===(s||w)),"".concat(N,"-loading"),c),"".concat(N,"-rtl"),"rtl"===j),void 0===d?"":d);return u.createElement(g.Z,{insertExtraNode:!0},u.createElement(h,(0,i.Z)({},f,{prefixCls:N,className:E,disabled:k,ref:n,loadingIcon:Z})))});v.__ANT_SWITCH=!0;var y=v},76394:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var i=t(85893),a=t(23657),r=t(1461),s=t(10227),l=t(78021),o=t(56469),c=t(67294),u=t(41664),d=t.n(u),f=t(4481),h=t(25510),p=t(17586),m=t(70869),x=t(22067),g=t(28700);let{Title:b}=a.default,v=()=>{let{serverConfig:e,setFieldInConfigState:n}=(0,c.useContext)(f.a)||{},{notifications:t}=e||{},{discord:a}=t||{},{enabled:r,webhook:s,goLiveMessage:l}=a||{},[u,d]=(0,c.useState)({}),[v,y]=(0,c.useState)(null),[j,w]=(0,c.useState)(!1);(0,c.useEffect)(()=>{d({enabled:r,webhook:s,goLiveMessage:l})},[t,a]);let C=()=>""!==s&&""!==l,k=e=>{let{fieldName:n,value:t}=e;d({...u,[n]:t}),w(C())},N=()=>{y(null),clearTimeout(null)},Z=async()=>{await (0,m.Si)({apiPath:"/notifications/discord",data:{value:u},onSuccess:()=>{n({fieldName:"discord",value:u,path:"notifications"}),y((0,g.kg)(g.zv,"Updated.")),setTimeout(N,m.sI)},onError:e=>{y((0,g.kg)(g.Un,e)),setTimeout(N,m.sI)}})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b,{children:"Discord"}),(0,i.jsx)("p",{className:"description reduced-margins",children:"Let your Discord channel know each time you go live."}),(0,i.jsxs)("p",{className:"description reduced-margins",children:[(0,i.jsx)("a",{href:"https://support.discord.com/hc/en-us/articles/228383668",target:"_blank",rel:"noreferrer",children:"Create a webhook"})," ","under ",(0,i.jsx)("i",{children:"Edit Channel / Integrations"})," on your Discord channel and provide it below."]}),(0,i.jsx)(x.Z,{apiPath:"",fieldName:"discordEnabled",label:"Enable Discord",checked:u.enabled,onChange:e=>{k({fieldName:"enabled",value:e})}}),(0,i.jsx)("div",{style:{display:u.enabled?"block":"none"},children:(0,i.jsx)(h.nv,{...m.oy.webhookUrl,required:!0,value:u.webhook,onChange:k})}),(0,i.jsx)("div",{style:{display:u.enabled?"block":"none"},children:(0,i.jsx)(h.nv,{...m.oy.goLiveMessage,required:!0,value:u.goLiveMessage,onChange:k})}),(0,i.jsx)(o.Z,{type:"primary",onClick:Z,style:{display:j?"inline-block":"none",position:"relative",marginLeft:"auto",right:"0",marginTop:"20px"},children:"Save"}),(0,i.jsx)(p.E,{status:v})]})},{Title:y}=a.default,j=()=>{let{serverConfig:e,setFieldInConfigState:n}=(0,c.useContext)(f.a)||{},{notifications:t}=e||{},{browser:a}=t||{},{enabled:r,goLiveMessage:s}=a||{},[l,u]=(0,c.useState)({}),[d,b]=(0,c.useState)(null),[v,j]=(0,c.useState)(!1);(0,c.useEffect)(()=>{u({enabled:r,goLiveMessage:s})},[t,a]);let w=()=>!0,C=e=>{let{fieldName:n,value:t}=e;console.log(n,t),u({...l,[n]:t}),j(w())},k=()=>{b(null),clearTimeout(null)},N=async()=>{await (0,m.Si)({apiPath:"/notifications/browser",data:{value:l},onSuccess:()=>{n({fieldName:"browser",value:l,path:"notifications"}),b((0,g.kg)(g.zv,"Updated.")),setTimeout(k,m.sI)},onError:e=>{b((0,g.kg)(g.Un,e)),setTimeout(k,m.sI)}})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y,{children:"Browser Alerts"}),(0,i.jsx)("p",{className:"description reduced-margins",children:"Viewers can opt into being notified when you go live with their browser."}),(0,i.jsx)("p",{className:"description reduced-margins",children:"Not all browsers support this."}),(0,i.jsx)(x.Z,{apiPath:"",fieldName:"enabled",label:"Enable browser notifications",onChange:e=>{C({fieldName:"enabled",value:e})},checked:l.enabled}),(0,i.jsx)("div",{style:{display:l.enabled?"block":"none"},children:(0,i.jsx)(h.nv,{...m.mv.goLiveMessage,required:!0,type:h.Sk,value:l.goLiveMessage,onChange:C})}),(0,i.jsx)(o.Z,{type:"primary",style:{display:v?"inline-block":"none",position:"relative",marginLeft:"auto",right:"0",marginTop:"20px"},onClick:N,children:"Save"}),(0,i.jsx)(p.E,{status:d})]})},{Title:w}=a.default,C=()=>{let{serverConfig:e}=(0,c.useContext)(f.a)||{},{federation:n}=e||{},{enabled:t}=n||{},[a,r]=(0,c.useState)({});return(0,c.useEffect)(()=>{r({enabled:t})},[t]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w,{children:"Fediverse Social"}),(0,i.jsx)("p",{className:"description",children:"Enabling the Fediverse social features will not just alert people to when you go live, but also enable other functionality."}),(0,i.jsxs)("p",{children:["Fediverse social features:"," ",(0,i.jsx)("span",{style:{color:n.enabled?"green":"red"},children:a.enabled?"Enabled":"Disabled"})]}),(0,i.jsx)(d(),{passHref:!0,href:"/admin/config-federation/",children:(0,i.jsx)(o.Z,{type:"primary",style:{position:"relative",marginLeft:"auto",right:"0",marginTop:"20px"},children:"Configure"})})]})};var k=t(18063),N=t(11),Z=t(25889);let{Title:E}=a.default;function S(){let[e,n]=(0,c.useState)(null),{serverConfig:t}=(0,c.useContext)(f.a)||{},{yp:a}=t,{instanceUrl:u}=a,[h,p]=(0,c.useState)(!1);(0,c.useEffect)(()=>{n({instanceUrl:u})},[a]);let x=""!==u,g=!x&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Z,{message:"You must set your server URL before you can enable this feature.",type:"warning",showIcon:!0}),(0,i.jsx)("br",{}),(0,i.jsx)(k.$7,{fieldName:"instanceUrl",...m.yi,value:(null==e?void 0:e.instanceUrl)||"",initialValue:a.instanceUrl,type:k.xA,onChange:t=>{let{fieldName:i,value:a}=t;p((0,N.jv)(a)),n({...e,[i]:a})},onSubmit:()=>{h&&n({...e,enabled:!1})},required:!0})]});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(E,{children:"Notifications"}),(0,i.jsxs)("p",{className:"description",children:["Let your viewers know when you go live by supporting any of the below notification channels."," ",(0,i.jsx)("a",{href:"https://owncast.online/docs/notifications/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"Learn more about live notifications."})]}),g,(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(l.Z,{span:10,className:"form-module ".concat(x?"":"disabled"),style:{margin:"5px",display:"flex",flexDirection:"column"},children:(0,i.jsx)(j,{})}),(0,i.jsx)(l.Z,{span:10,className:"form-module ".concat(x?"":"disabled"),style:{margin:"5px",display:"flex",flexDirection:"column"},children:(0,i.jsx)(v,{})}),(0,i.jsx)(l.Z,{span:10,className:"form-module ".concat(x?"":"disabled"),style:{margin:"5px",display:"flex",flexDirection:"column"},children:(0,i.jsx)(C,{})}),(0,i.jsxs)(l.Z,{span:10,className:"form-module ".concat(x?"":"disabled"),style:{margin:"5px",display:"flex",flexDirection:"column"},children:[(0,i.jsx)(E,{children:"Custom"}),(0,i.jsx)("p",{className:"description",children:"Build your own notifications by using custom webhooks."}),(0,i.jsx)(d(),{passHref:!0,href:"/admin/webhooks",children:(0,i.jsx)(o.Z,{type:"primary",style:{position:"relative",marginLeft:"auto",right:"0",marginTop:"20px"},children:"Create"})})]})]})]})}S.getLayout=function(e){return(0,i.jsx)(Z.l,{page:e})}},11163:function(e,n,t){e.exports=t(43079)},55945:function(e,n,t){"use strict";function i(e){return n=>{let t=(e?Math[e]:Math.trunc)(n);return 0===t?0:t}}t.d(n,{u:function(){return i}})},96707:function(e,n,t){"use strict";t.d(n,{H_:function(){return o},I7:function(){return c},dP:function(){return a},fH:function(){return l},jE:function(){return i},vh:function(){return s},yJ:function(){return r}});let i=6048e5,a=864e5,r=6e4,s=36e5,l=43200,o=1440,c=Symbol.for("constructDateFrom")},16393:function(e,n,t){"use strict";t.d(n,{L:function(){return a}});var i=t(96707);function a(e,n){return"function"==typeof e?e(n):e&&"object"==typeof e&&i.I7 in e?e[i.I7](n):e instanceof Date?new e.constructor(n):new Date(n)}},64077:function(e,n,t){"use strict";t.d(n,{_:function(){return a}});var i=t(46042);function a(e,n){return+(0,i.Q)(e)-+(0,i.Q)(n)}},94817:function(e,n,t){"use strict";t.d(n,{c:function(){return r}});var i=t(55945),a=t(64077);function r(e,n,t){let r=(0,a._)(e,n)/1e3;return(0,i.u)(null==t?void 0:t.roundingMethod)(r)}},46042:function(e,n,t){"use strict";t.d(n,{Q:function(){return a}});var i=t(16393);function a(e,n){return(0,i.L)(n||e,e)}}},function(e){e.O(0,[83,1287,9796,443,7786,9904,3657,6167,2502,5889,2888,9774,179],function(){return e(e.s=7148)}),_N_E=e.O()}]);